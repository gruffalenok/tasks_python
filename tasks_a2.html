<html>
<head>
<meta charset="utf-8">
<title> Шахматы </title>
<style>
   body {  font-size: 130%;
           margin-top: 2em;
           margin-left: 4em;
		   margin-right: 4em;}
   pre  {  background-color: #eee;
           padding-top: 10;
	       padding-bottom: 10;}
</style>   
</head>
<body>
<h2>Шахматы</h2>
<p>Ниже написан текст программы - заготовка для шахматного "задачника". Скопируйте в новый файл и запустите её. Программа рисует одну клеточку шахматной доски (не там, где надо!) и считывает координаты курсора, когда в окне щёлкают мышкой.</p>
<p>Программа должна делать следующее (но пока не делает):</p>
<ul>
<li>рисовать шахматную доску (с полями),</li>
<li>выделять красной рамкой ту клеточку, на которой щёлкнули мышкой,</li>
<li>печатать, какие фигуры могут ходить из одной выделенной клетки в другую, а какие - нет.</li>
</ul>

<pre>
from tkinter import *

class Chess():
    def __init__(self, canvas, size=50, color_black='#784421', color_white='#ffcc00', margin=25):
        self.x1 = 0
        self.y1 = 0
        self.x2 = 0
        self.y2 = 0
        self.selected1 = False
        self.selected2 = False
        self.size = size
        self.color_black = color_black
        self.color_white = color_white
        self.margin = margin
        self.canvas = canvas

    def draw_board(self):
        color1 = self.color_black   # цвет тёмных клеток
        color2 = self.color_white   # цвет светлых клеток
        canvas = self.canvas        # холст
        size = self.size            # сторона клетки
        margin = self.margin        # отступ от начала координат, одинаковый по оси х и по оси y
        ###########################################################################
        # Напишите тело функции, которая рисует на холсте canvas шахматную доску
        # с размером клеток size и цветами клеток color1 и color2.
        # Клетки нужно рисовать с отступом margin от начала координат
        # (одинаковым по x и по y).
        ###########################################################################
        canvas.create_rectangle(0, 0, size, size, fill=color1)
        ############################################################################
        # конец моего кода
        ############################################################################

    def num_сell(self, x, y):
        size = self.size            # сторона клетки
        margin = self.margin        # отступ от начала координат, одинаковый по оси х и по оси y
        ############################################################################
        # Напишите тело функции, которая получает на вход координаты курсора x, y
        # и вычисляет позицию клетки x_num, y_num, в которой находится курсор.
        # Позиция левой верхней клетки 0, 0.
        # Известен размер клетки sise и величина полей margin
        # Переменная out должна принимать значение True в том случае,
        # если курсор оказался за пределами доски - на полях.
        ############################################################################
        x_num = 0
        y_num = 0
        out = False
        ############################################################################
        # конец моего кода
        ############################################################################
        return x_num, y_num, out

    def coord(self, x_num, y_num):
        x = self.margin + x_num * self.size
        y = self.margin + y_num * self.size
        return x, y

    def select_cell(self, num_x, num_y, out):
        if out:
            return
        if self.selected1 and not self.selected2:
            if self.x1 == num_x and self.y1 == num_y:
                return
            else:
                self.x2, self.y2 = num_x, num_y
                origin_x, origin_y = self.coord(self.x2, self.y2)
                self.canvas.create_rectangle(origin_x, origin_y, origin_x + self.size, origin_y + self.size, outline="red",
                                         tag = 'box', width = 4)
                self.selected2 = True
                self.selected1 = False
                print('x1 =', self.x1, 'y1 =', self.y1, 'x2 =', self.x2, 'y2 =', self.y2,)
                check(self.x1, self.y1, self.x2, self.y2)
        else:
            self.x1, self.y1 = num_x, num_y
            self.selected1 = True
            self.canvas.delete("box")
            self.selected2 = False
            origin_x, origin_y = self.coord(self.x1, self.y1)
            self.canvas.create_rectangle(origin_x, origin_y, origin_x + self.size, origin_y + self.size, outline="red",
                                         tag='box', width = 4)


def select(event):
    # event.x, event.y - координаты курсора мыши в момент нажатия на клавишу
    num_x, num_y, out = chess.num_сell(event.x, event.y)
    chess.select_cell(num_x, num_y, out)


def check_rook(x1, y1, x2, y2):
    #####################################################################################
    # Напишите тело функции, которая получает на вход позиции двух клеток (две пары чисел от 1 до 7), и
    # возвращает значение True, если ладья из первой клетки за 1 ход может попасть во вторую,
    # возвращает значение False, если ладья из первой клетки во вторую за 1 ход попасть не может.
    #####################################################################################
    return False
    ######################################################################################
    # конец моего кода
    ######################################################################################


def check_bishop(x1, y1, x2, y2):
    #####################################################################################
    # Напишите тело функции, которая получает на вход позиции двух клеток (две пары чисел от 1 до 7), и
    # возвращает значение True, если слон из первой клетки за 1 ход может попасть во вторую,
    # возвращает значение False, если слон из первой клетки во вторую за 1 ход попасть не может.
    #####################################################################################
    return False
    ######################################################################################
    # конец моего кода
    ######################################################################################


def check_knight(x1, y1, x2, y2):
    #####################################################################################
    # Напишите тело функции, которая получает на вход позиции двух клеток (две пары чисел от 1 до 7), и
    # возвращает значение True, если конь из первой клетки за 1 ход может попасть во вторую,
    # возвращает значение False, если конь из первой клетки во вторую за 1 ход попасть не может.
    #####################################################################################
    return False
    ######################################################################################
    # конец моего кода
    ######################################################################################


def check_king(x1, y1, x2, y2):
    #####################################################################################
    # Напишите тело функции, которая получает на вход позиции двух клеток (две пары чисел от 1 до 7), и
    # возвращает значение True, если король из первой клетки за 1 ход может попасть во вторую,
    # возвращает значение False, если король из первой клетки во вторую за 1 ход попасть не может.
    #####################################################################################
    return False
    ######################################################################################
    # конец моего кода
    ######################################################################################


def check_queen(x1, y1, x2, y2):
    #####################################################################################
    # Напишите тело функции, которая получает на вход позиции двух клеток (две пары чисел от 1 до 7), и
    # возвращает значение True, если ферзь из первой клетки за 1 ход может попасть во вторую,
    # возвращает значение False, если ферзь из первой клетки во вторую за 1 ход попасть не может.
    #####################################################################################
    return False
    ######################################################################################
    # конец моего кода
    ######################################################################################


def check(x1, y1, x2, y2):
    ######################################################################################
    # Напишите тело функции, которая получает на вход позиции двух клеток (две пары чисел от 1 до 7),
    # а на выходе печатает
    # список шахматных фигур, которые могут за 1 ход попасть из первой клетки во вторую,
    # и список шахматных фигур, которые не могут за 1 ход попасть из первой клетки во вторую.
    # Используйте вызов функций, вычисляющих возможность хода для каждой фигуры в отдельности.
    ######################################################################################
    print(x1, y1, x2, y2)
    print('Так ходить могут:')
    if check_rook(x1, y1, x2, y2):
        print('Ладья')
    print('Так ходить не могут:')

    ######################################################################################
    # конец моего кода
    ######################################################################################


# начало программы
Size_board = 448 # Размер шахматной доски (ширина и высота холста)
root = Tk()      # Создаётся графическое окно
# Создаётся объект класса Canvas (холст), занимающий всё окно целиком
canv = Canvas(root, width=Size_board, height=Size_board, bg='#d38d5f')
canv.pack()      # Холст размещается в окне
chess = Chess(canv)  # Создаётся объект класса Chess
chess.draw_board()   # Вызывается метод класса Chess draw_board()
# метод bind() обрабатывает события, связанные с действиями пользователя:
# при нажатии на левую клавишу мышки вызывается функция select() и создаётся объект event,
# который передаётся ей в качестве параметра
canv.bind("&lt;Button-1&gt;", select)
root.mainloop()  # Графическое окно выводится на экран и готово реагировать на события
</pre>

<p><b>A. </b> Чтобы научить программу рисовать шахматную доску, нужно изменить функцию <em><strong>draw_board(),</strong></em> которая должна рисовать на холсте <em><strong>canvas</strong></em> шахматную доску с размером клеток <em><strong>size</strong></em> и цветами клеток <em><strong>color1</strong></em> и <em><strong>color2</strong></em>. Клетки нужно рисовать с отступом <em><strong>margin</strong></em> от начала координат (одинаковым по x и по y). Если щёлкнуть мышкой на холсте, появляется красная рамка - в этом месте должна быть левая верхняя клетка шахматной доски.</p>

<p><strong>Важно!</strong> Следует следить за отступами: тело функции сдвинуто на 4 пробела вправо относительно инструкции <strong><em>def</em>,</strong> определяющей функцию.</p>
<hr>
<p><b>B. </b>  Чтобы научить программу выделять клетку, в которую щёлкнули курсором, нужно переделать функцию <strong><em>num_сell()</em></strong>. У этой функции <em><strong>num_сell</strong> </em> три параметрами: <strong><em>self</em></strong>, <strong><em>x</em></strong>,<em> <strong>y</strong></em>. <strong><em>Self</em></strong> - это специальный объект, с ним связаны переменные <strong><em>self.size</em></strong> (размер клетки) и <strong><em>self.margin</em></strong> (ширина полей), которые можно использовать для вычислений, <em><strong>x</strong> </em>и <strong><em>y</em></strong> - это координаты курсора, которые получает функция.</p>
<p>Функция должна вычислять значения трёх переменных: <strong><em>x_num</em></strong>  - номер колонки, в которой находится клетка, начиная с 0), <strong><em>y_num</em></strong> - номер ряда, в котором находится клетка, начиная с 0 и <strong><em>out</em></strong> - логическое значение, равное <em><strong>True</strong></em>, если курсор оказывается за границами шахматной доски.</p>

<p>В последней строчке команда <strong><em>return</em></strong> возвращает значения <strong><em>x_num</em></strong>, <strong><em>y_num</em></strong> и <strong><em>out</em></strong>. Эту строчку менять не надо!</p>
<hr>
<p><b>C. </b>  Чтобы программа печатала, какие фигуры могут ходить из одной выделенной клетки в другую, а какие - нет, нужно дописать функции <strong><em>check_rook(x1, y1, x2, y2), check_bishop(x1, y1, x2, y2), check_knight(x1, y1, x2, y2), check_king(x1, y1, x2, y2), check_queen(x1, y1, x2, y2)</em></strong>.
<p>Эти функции получают на вход координаты начальной и конечной клеток и должны давать в ответе <strong><em>True</em></strong> или <strong><em>False</em></strong>, в зависимости от того, может так ходить соответствующая шахматная фигура, или нет. Их должна вызывать функция  <strong><em>check(x1, y1, x2, y2)</em></strong> (её тоже нужно дописать),
которая печатает, какие фигуры могут ходить указанным образом, а какие - нет.</p>
<hr>
<p><b>D. </b> Опишите словами, что ещё нужно научить делать программу, чтобы с её помощью можно было решать шахматные задачи. Какие функции для этого нужно написать?  </p>

</body>
</html>
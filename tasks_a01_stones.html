<html>
<head>
<meta charset="utf-8">
<title> Математические игры с выигрышными и проигрышными позициями</title>
<style>
   body {  font-size: 130%;
           margin-top: 2em;
           margin-left: 4em;
		   margin-right: 4em;}
   p.right1  {
           margin-left: 2em;
   }
   p.right  {
           margin-left: 4em;
   }
   pre  {  background-color: #eee;
           padding-top: 10;
	       padding-bottom: 10;}
   em   {  color: darkgreen;           
   }
</style>   
</head>
<body>
<h2>Математические игры с выигрышными и проигрышными позициями</h2>
<p><b>Игра 1. </b>Имеется кучка из N конфет. Два игрока по очереди берут из неё конфеты, причём за один ход разрешается взять от 1 до М конфет. Проигрывает тот, кто не может сделать ход. </p>
<p><b>A. </b>Напишите функцию <em>move_player()</em>, которая будет "знать" числа М и N (то есть это - <a href='https://younglinux.info/python/local-global' target='_blank'> глобальные переменные, значения которых задаются в основной программе и не меняются внутри функции)</a>, где М - максимальное число предметов, которое можно брать, а N - текущее число предметов в кучке, <br>- спрашивать игрока, сколько предметов он хочет взять, <br>- проверять, можно ли взять столько предметов, переспрашивать, если нельзя, <br>- давать в ответе число взятых предметов.</p>
<p><b>Подсказка: </b>1) Для проверки правильности хода человека понадобится цикл while (а вдруг он не один раз ошибётся?).<br>
2) Можно менять переменную N внутри функции. Но тогда необходимо явно объявить её глобальной, иначе программа  <a href='https://younglinux.info/python/local-global' target='_blank'>будет воспринимать её как локальную</a>!
<pre>
def move_player():
    global N
</pre>
</p>
<p>Напишите функцию <em>random_move()</em>, которая, "зная" числа M и N, печатает и даёт в ответе случайный возможный ход.</p>
<p><b>Подсказка: </b>Числа нужно сразу брать в нужном диапазоне. Не забудьте рассмотреть случай, когда  N стало меньше М.
</p>
<p>Напишите программу, использующую эти функции. В программе задаются числа M и N, выводятся условия игры и вопрос к человеку-игроку, первым или вторым он будет ходить. В зависимости от ответа задаётся значение переменной <em>player</em>.</p>
<p>В основном цикле программа в зависимости от значения переменной <em>player</em> вызывает одну из функций, присваивая переменной <em>move</em> вычисленное функцией значение. Значение переменной <em>player</em> надо поменять. В зависимости от сделанного хода меняется число предметов.</p>
<p>В конце нужно напечатать, кто выиграл - человек или программа.</p>

<hr><p><b>B. </b>Напишите функцию <em>clever_move()</em>, которая позволит программе делать правильный ход. Она должна <br>- "знать" числа М и N (где М - максимальное число предметов, которое можно брать, а N - текущее число предметов в кучке), <br>- вычислять, какое количество предметов надо взять, чтобы противник оказался в проигрывщной позиции, <br>- если невозможно поставить противника в проигрышную позицию, выбирать случайный ход из имеющихся возможных, <br>- давать в ответе число взятых компьютером предметов.</p>
<p>Измените основную программу так, чтобы компьютер играл правильно.</p>

<h3>Как научить программу выигрывать?</h3>
<p class='right1'><b>Первый способ. </b> Надо научиться выигрывать самому, для этого составить карту выигрышных и проигрыщных позиций. Например, если можно брать не больше 2 конфет, то позиция 0 будет проигрышной. Позиции 1 и 2 будут выигрышными, так как из них можно отправить противника в проигрышную позицию 0. А вот из позиции 3 любой ход приведёт в выигрышную позицию (1 или 2). То есть как бы мы ни пошли, у противника будет возможность выиграть. Позиция 3 - проигрышная. И так далее.</p><p class='right1'>
Если мы научим программу вычислять выигрышные и проигрышные позиции, ей остаётся каждый свой ход пытаться отправить противника в проигрышную позицию. А если такой возможности нет (то есть программа сама попала в проигрышную позицию), то случайным образом выбирать один из возможных ходов - авось противник запутается и ошибётся.</p>
<p class='right'><b>Второй способ. </b>Пусть программа сама учится выигрывать. Напишем функцию, которая получает на вход текущую позицию, а в ответе даёт список (или кортеж) позиций, в которые из неё можно попасть, если играть по правилам. Программа должна сама составить карту выигрышных и проигрышных позиций, пользуясь этой функцией. Это может быть или строка из символов "П" и "В", или список логических значений, или список проигрышных позиций.</p><p class='right'>
Чтобы составить этот список, программа должна по очереди перебрать все позиции от 0 до N. Если из данной позици можно перейти в проигрышную, то позиция выигрышная. Если из данной позиции можно попасть только в выигрышные позиции, то позиция проигрышная.</p>
<hr><p><b>*C. </b>
Напишите программу, которая выберет случайные числа N и М - такие, что число N зависит от М (допустим, оно больше, чем М*2, но не больше, чем М*5), а потом будет организовывать игру двух игроков (говорить, чей ход, сколько конфет осталось, кто выиграл, следить за правильностью ходов).</p>
<p>Может быть два варианта игры: 1) когда играют два человека, 2) когда человек играет с программой. Во втором случае человек выбирает, первым или вторым ему играть. </p>

<hr><p><b>D. Игра 2.</b> Имеется кучка из N конфет. Два игрока по очереди берут из неё конфеты, причём за один ход разрешается взять не больше половины всех конфет. Проигрывает тот, кто не может сделать ход (это произойдёт, когда останется одна конфета). </p>
<p> 1) Напишите программу, которая организует такую игру с двумя игроками или с одним игроком и программой, которая делает случайные правильные ходы. </p>
<p>2) Напишите программу, которая может сама играть за одного из игроков. Играть первым или вторым, выбирает человек. При этом программа играет либо оптимально, либо случайным образом, если оптимальные ходы отсутствуют.</p>
<p><b>Подсказка: </b> Составьте карту проигрышных и выигрышных позиций для этой игры. Найдите формулу, по которой можно вычислять проигрышные позиции. Используя эту формулу, можно в начале игры составить список проигрышных позиций, чтобы потом использовать его в функции <em>clever_move()</em>.
</p>
<hr><p><b>*E. Игра 3. </b>Имеется кучка из N конфет. Два игрока по очереди берут из неё конфеты, причём за один ход разрешается взять М1, M2 или М3 (например, 3, 5 или 8) конфет. Числа М1, M2 и М3 выбираются случайным образом. </p>
<p> 1) Напишите программу, которая организует такую игру с двумя игроками или с одним игроком и программой, которая делает случайные правильные ходы. </p>
<p>2) Напишите программу, которая может сама играть за одного из игроков. Играть первым или вторым, выбирает человек. При этом программа играет либо оптимально, либо случайным образом, если оптимальные ходы отсутствуют.</p><p>
В этой задаче удобно составление карты выигрышных и проигрышных позиций переложить на программу.

</p>
<hr>
</body>
</html>